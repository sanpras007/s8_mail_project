<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/48a1cfc20b.js" crossorigin="anonymous"></script>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{{ url_for('static', filename='styles/loader.css') }}">

    <link rel="stylesheet" href="{{ url_for('static', filename='styles/upload.css') }}">

    <style>
    </style>

    <title>SmartScribe</title>
</head>

<body>

    <div class="container">
        <h1><img src="static/favicon_io/SmartScribeLogo.png" width="50" height="50"> SmartScribe</h1>

        <form id="uploadForm" action="/ans_key_check" method="POST" enctype="multipart/form-data">
            <label for="answer_key"><i class="fas fa-file-upload"></i> Upload Answer Key:</label>
            <input type="file" id="fileInput" name="answer_key" accept="image/*" required>

            <div class="image-preview" id="imagePreview">
                <p>Image Preview:</p>
                <img id="previewImg" src="" alt="Image Preview">
            </div>

            <button type="submit" class="btn-submit"><i class="fas fa-upload"></i> Submit</button>
        </form>
    </div>

    <div class="main_loader" style="display:none; align-items: center; justify-content: center;">
        <div class="loader">
            <svg viewBox="0 0 80 80">
                <circle cx="40" cy="40" r="32"></circle>
            </svg>
        </div>
        <div class="loader triangle">
            <svg viewBox="0 0 86 80">
                <polygon points="43 8 79 72 7 72"></polygon>
            </svg>
        </div>
        <div class="loader">
            <svg viewBox="0 0 80 80">
                <rect x="8" y="8" width="64" height="64"></rect>
            </svg>
        </div>
        <p class="loader_message">
            <span class="typing">Answer key processing...</span>
            <br>
            <span class="blink">Please wait, we are analyzing the key</span>
        </p>
    </div>
</body>

<script>
    document.getElementById('fileInput').addEventListener('change', function(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('previewImg').src = e.target.result;
                document.getElementById('imagePreview').style.display = 'block';
            };
            reader.readAsDataURL(file);
        }
    });

    document.getElementById('uploadForm').addEventListener('submit', function() {
        document.querySelector('.main_loader').style.display = 'flex';
    });
</script>

</html>
