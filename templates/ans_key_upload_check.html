<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/48a1cfc20b.js" crossorigin="anonymous"></script>

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="{{ url_for('static', filename='styles/loader.css') }}">

    <style>
        * {
            font-family: 'Ubuntu', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #292929, #1a1a1a);
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .container {
            width: 800px;
            background: rgba(255, 255, 255, 0.1);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0px 10px 30px rgba(255, 255, 255, 0.2);
            text-align: center;
            height: auto;
            backdrop-filter: blur(10px);
        }

        h1 {
            color: white;
            font-weight: 700;
            margin-bottom: 25px;
            font-family: 'Times New Roman', serif;
        }

        label {
            font-weight: 500;
            display: block;
            margin: 10px 0 5px;
            color: white;
            text-align: left;
        }

        input[type="file"] {
            width: 100%;
            padding: 10px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            cursor: pointer;
            color: white;
        }

        .btn-submit {
            background: #ff6600;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
            width: 100%;
            margin-top:10px
        }

        .btn-submit:hover {
            background: #e65c00;
        }

        .image-preview {
            display: none;
            margin-top: 20px;
            text-align: center;
        }

        .image-preview img {
            max-width: 100%;
            max-height: 250px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        }
    </style>

    <title>SmartScribe</title>
</head>

<body>

    <div class="container">
        <h1><img src="static/favicon_io/SmartScribeLogo.png" width="50" height="50"> SmartScribe</h1>

        <form id="uploadForm" action="/ans_key_check" method="POST" enctype="multipart/form-data">
            <label for="answer_key"><i class="fas fa-file-upload"></i> Upload Answer Key:</label>
            <input type="file" id="fileInput" name="answer_key" accept="image/*" required>

            <div class="image-preview" id="imagePreview">
                <p>Image Preview:</p>
                <img id="previewImg" src="" alt="Image Preview">
            </div>

            <button type="submit" class="btn-submit"><i class="fas fa-upload"></i> Submit</button>
        </form>
    </div>

    <div class="main_loader" style="display:none; align-items: center; justify-content: center;">
        <div class="loader">
            <svg viewBox="0 0 80 80">
                <circle cx="40" cy="40" r="32"></circle>
            </svg>
        </div>
        <div class="loader triangle">
            <svg viewBox="0 0 86 80">
                <polygon points="43 8 79 72 7 72"></polygon>
            </svg>
        </div>
        <div class="loader">
            <svg viewBox="0 0 80 80">
                <rect x="8" y="8" width="64" height="64"></rect>
            </svg>
        </div>
        <p class="loader_message">
            <span class="typing">Answer key processing...</span>
            <br>
            <span class="blink">Please wait, we are analyzing the key</span>
        </p>
    </div>
</body>

<script>
    document.getElementById('fileInput').addEventListener('change', function(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('previewImg').src = e.target.result;
                document.getElementById('imagePreview').style.display = 'block';
            };
            reader.readAsDataURL(file);
        }
    });

    document.getElementById('uploadForm').addEventListener('submit', function() {
        document.querySelector('.main_loader').style.display = 'flex';
    });
</script>

</html>
